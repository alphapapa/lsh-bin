#!/bin/sh

mapOp="-m"

for arg in $@; do
    case "$arg" in
        -a) prompt="goto:"; bring="false" ;;
        -R) prompt="bring:"; bring="true" ;;
        -t) mapOp="-t" ;;
        *) selected="$arg" ;;
    esac
done

[ -z "$selected" ] && selected=$(
    for w in `lsw`; do
        echo $w $(xprop -id $w WM_NAME | sed 's/[^=]\+=//')
    done | vmenu --no-refocus -p $prompt | scut 0
)

if [ -n "$selected" ]; then
    wtf $selected
    chwso -r $selected
    mapw $mapOp $selected
    #TODO: workspaces handling
fi

